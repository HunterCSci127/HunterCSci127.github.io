<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Lab 5, CSci 127, Introduction to Computer Science, Hunter College, CUNY, Fall 2017</title>
    <link type="text/css" rel="stylesheet" href="../../../lehman.css" />
</head>
<body>

<div id="header">

<h2>Lab 5<br>CSci 127: Introduction to Computer Science<br>
Hunter College, City University of New York<br>
Fall 2017<br><br>
</h2>
</div>

<div>

<p>
Today's lab will focus on logical expressions and circuits.  

<p>Software tools needed:  web browser and Python IDLE programming 
environment with numpy and matplotlib packages installed.




</div>




<div>
<h3>Using Python, Gradescope, and Blackboard</h3>

<p>See <a href="lab1.html">Lab 1</a> for details on using Python, Gradescope, and Blackboard.
</p>
</div>

<div>
<h3>Logical Expressions</h3>

<p> Last week, we introduced decisions (if-statements).  These relied on the "test" which was an expression that evaluated to true or false.  

<p> We can build up more complicated logical expressions using built-in operators, <tt>and</tt>, <tt>or</tt>, and </tt>not</tt>.  A standard way to summaries these operators is with <b>truth tables</b>.  A truth table lists all the possible inputs and gives the output for each combination.  

<p>For example, here is the truth table for 
the <tt>and</tt> operator:

<p>
<table border="1px">
	<tr>
		<th><tt>in1</tt></th> <th><tt>in2</tt></th> <th><tt>in1 and in2</tt></th>
	</tr>
	<tr>
		<td>True</td><td>True</td><td>True</td>
	</tr>
	<tr>
		<td>False</td><td>True</td><td>False</td>
	</tr>
	<tr>
		<td>True</td><td>False</td><td>False</td>
	</tr>
	<tr>
		<td>False</td><td>False</td><td>False</td>
	</tr>	
</table>

<p>It lists all the possible combinations of values for the inputs, <tt>in1</tt> and <tt>in2</tt> and what <tt>and</tt> would give as output.  For example, if <tt>in1</tt> is <tt>True</tt> and <tt>in2</tt> is <tt>False</tt>, the value of 
<tt>in1 and in2</tt> can be read off the last column of the third line of the truth table as <tt>False</tt>.

<p>Similarly here is the truth table for <tt>or</tt>:
<table border="1px">
	<tr>
		<th><tt>in1</tt></th> <th><tt>in2</tt></th> <th><tt>in1 or in2</tt></th>
	</tr>
	<tr>
		<td>True</td><td>True</td><td>True</td>
	</tr>
	<tr>
		<td>False</td><td>True</td><td>True</td>
	</tr>
	<tr>
		<td>True</td><td>False</td><td>True</td>
	</tr>
	<tr>
		<td>False</td><td>False</td><td>False</td>
	</tr>	
</table>

<p>For example, if <tt>in1</tt> is <tt>True</tt> and <tt>in2</tt> is <tt>False</tt>, the value of 
<tt>in1 or in2</tt> can be read off the last column of the third line of the truth table as <tt>True</tt>.

<p> The <tt>not</tt> operator changes the input from false to true, or true to false.  That is, <tt>not True</tt> is false and <tt>not False</tt> is true.  We can write this in the table format above:

<p>
<table border="1px">
	<tr>
		<th><tt>in1</tt></th> <th><tt>not in1</tt></th>
	</tr>
	<tr>
		<td>True</td><td>False</td>
	</tr>
	<tr>
		<td>False</td><td>True</td>
	</tr>	
</table>

<p>
These logical operators are useful building complex tests for our <tt>if</tt>-statements (as well as other control structures that will be introduced later).


<h4>Snow Pack in California</h4>

<p>
As an example of logical expressions, we will use them to estimate the snow pack level in California over the last drought using satellite imagery.

<p>
Landsat Satellite Program is a joint program of USGS and NASA that has provided continuous images of the earth since 1972. The data is publicly available through the USGS-EROS site and has been invaluable in mapping changes in the earth. Today, we will use data images from the USGS remote sensing gallery:
<blockquote>
<a href="http://remotesensing.usgs.gov/gallery/">http://remotesensing.usgs.gov/gallery/</a>
</blockquote>

<p> The <a href="https://earthobservatory.nasa.gov/IOTD/view.php?id=89738">snow pack in the Sierra Nevada mountains</a> provide almost a third of the water used by California.  As a first estimate of snow pack, the number of pixels that are (nearly) white are counted.
How much change has their been in the Sierra Nevada snowpack during the past drought in California?  Here are images from before and during the worst years of the drought:
<table>
	<tr>
		<td><img src="CaliforniaDrought_02232011_md.png" width=300></td>
		<td><img src="CaliforniaDrought_02122013_md.png" width=300></td>
		<td><img src="CaliforniaDrought_02232014_md.png" width=300></td>
	</tr>
	<tr>
		<td><a href="CaliforniaDrought_02232011_md.png">February 2011</a></td>
		<td><a href="CaliforniaDrought_02122013_md.png">February 2013</a></td>
		<td><a href="CaliforniaDrought_02232014_md.png">February 2014</a></td>
	</tr>
</table>
 
<p>How much snow is there?  We will use the number of pixels that are nearly white as an estimate of the snow.  We can add in a new variable, <tt>countSnow</tt> to keep track of each time a pixel is nearly white.
Here's an outline of our program:
<ol>
	<li> Import the libraries to manipulate and display arrays.
	<li> Read in the California image and store in the variable, <tt>ca</tt>
	<li> Create a new variable, <tt>countSnow</tt>, to keep track of the number of pixels that are nearly white.
	<li> For each element in elevations, 
	<li> &nbsp; &nbsp; &nbsp; &nbsp; If the pixel is nearly white
	<li> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
			<tt>countSnow = countSnow + 1</tt>
	<li> Print out <tt>countSnow</tt>.
</ol>

<p>When is a pixel white?  It's when the red, green, and blue values are close to 100%.  In code, we would have:
<pre style = "background-color:lavender;width:675px">
t = 0.75    #Threshold for almost white-- can adjust between 0.0 and 1.0 

...
for i in range(ca.shape[0]):
    for j in range(ca.shape[1]):
        if (ca[i,j,0] > t) and (ca[i,j,1] > t) and (ca[i,j,2] > t):
             countSnow = countSnow + 1
</pre>

Let's translate that into Python.  Open up a new IDLE window and copy over the outline.  Using the image programs from <a href="lab4.html">last lab</a> as a template, fill in as much as possible before looking at the program below:

<pre style = "background-color:lavender;width:675px">
#Name:  CSci 127 Teaching Staff
#Date:  Fall 2017
#This program loads an image, counts the number of pixels that are
#    nearly white as an estimate for snow pack.

#Import the packages for images and arrays:
import matplotlib.pyplot as plt  
import numpy as np


ca = plt.imread('CaliforniaDrought_02232011_md.png')   #Read in image
countSnow = 0            #Number of pixels that are almost white
t = 0.75                 #Threshold for almost white-- can adjust between 0.0 and 1.0

#For every pixel:
for i in range(ca.shape[0]):
     for j in range(ca.shape[1]):
          #Check if red, green, and blue are > t:
          if (ca[i,j,0] > t) and (ca[i,j,1] > t) and (ca[i,j,2] > t):
               countSnow = countSnow + 1

print("Snow count is", countSnow)
</pre>

<p>This program assumes that you have downloaded and saved <a href="CaliforniaDrought_02232011_md.png">CaliforniaDrought_02232011_md.png</a> 
to the same directory as your program.

<p>How can you modify your program to let the user specify the input file?  
See
<a href="ps.html">Programming Problem List</a>.

</div>


<div>
<h3>Logical Circuits</h3>

<p>The logical expressions above are useful not only in designing decisions and selecting data in Python, but the same concept underlies much of the hardware of computers.  The <tt>and</tt>, <tt>or</tt>, and <tt>not</tt> can all be simulated in hardware via <a href="https://en.wikipedia.org/wiki/Logic_gate">logic gates</a>.  These gates take inputs (usually 0 or 1) and output a value, based on the logical operator it is simulating.  


<p>Here is a simulator for circuits.  Let's see an <tt>and</tt> gate in action:
<p> 
<a href="http://www.neuroproductions.be/logic-lab/index.php?id=78962" target="_blank">
<img src="andGate.png" height=200><br>
(click to launch new window with circuit builder)</a>

<!--
<iframe width="800" height="600" frameborder="0" src="http://www.neuroproductions.be/logic-lab/index.php?id=78962"> </iframe>
-->

<ul>
	<li> Try toggling (clicking on) the switches on the left of the canvas.  What happens?  
	<li> When does the light turn red?  
	<li> When does the light turn off?
</ul>

<p>
Try making a circuit with an <tt>or</tt> gate:
	<li> From the left hand menu, pull over two switches (the little boxes with a toggle switch on them) to the canvas..  
	<li> Scroll down to the next menu, and choose "OR" from the Logic ports and 
	drag it over to canvas.
	<li> Each switch has an output (little circle with an outward pointing arrow).  Click on the output of the first switch and link to the inward pointing arrow of the OR gate.
	<li> Repeat with the other switch to connect it to the other input of the AND gate.
	<li> Scroll down to the bottom of the left hand menu, and choose the output 
	with the single red circle.
	<li> Connect the output of the OR to the input of the red output gate.
	<li> Toggle (click) on the switches.  What happens to the red output light?
</ul>	

<p> What is different between the behavior of the <tt>or</tt> and <tt>and</tt> gates?

<h4>Majority of 3 Inputs</h4>

<p>
Now, let's build a circuit, or collection of gates, that takes
majority of 3 inputs, called <tt>in1</tt>, <tt>in2</tt>, <tt>in3</tt>:  
<ul>
	<li> If two or more of the inputs are <tt>True</tt>, then your expression should evaluate to  <tt>True</tt>.
	<li> Otherwise (two or more of the inputs are <tt>False</tt>), then your expression should evaluate to <tt>False</tt>.
</ul>

<p> 
<a href="http://www.neuroproductions.be/logic-lab/" target="_blank">
Here's a window</a> for building your circuit.  Directions (with images) are below:
<!--
<p> <iframe width="800" height="600" frameborder="0" src="https://www.neuroproductions.be/logic-lab/"> </iframe>
-->
<p>Build your circuit as you read the instructions below:
<ol>
	<li>  The question asks for 3 inputs-- let's use switches since those are easy to test out whether it works.
	<li>  We are going to need to check if any pair of inputs is True.  An easy way to do this is to check that:
	<ul>
		<li> <tt>in1</tt> and <tt>in2</tt> are both true, or  
		<li> <tt>in1</tt> and <tt>in3</tt> are both true, or  
		<li> <tt>in3</tt> and <tt>in3</tt> are both true 		
	</ul>
	An easy way to do this is to "split the signal" of each input, so, we can use it in multiple places.
	<br>
	Go to the "Extras" menu (may need to scroll down) and pick up 3 splitters (has 1 input, 3 outputs) and hook one up to each of the inputs:<br>
	<img src="maj1.png" height=200>.
	<li> We'll build up our circuits in stages:
	<ul>
		<li> To check that <tt>in1</tt> and <tt>in2</tt> are both true, hook both of them up to an <tt>and</tt> gate (in the Logic ports menu).
		<li> To check that <tt>in1</tt> and <tt>in3</tt> are both true, hook both of them up to an <tt>and</tt> gate (in the Logic ports menu).
		<li> To check that <tt>in2</tt> and <tt>in3</tt> are both true, hook both of them up to an <tt>and</tt> gate (in the Logic ports menu).
	</ul>
	<img src="maj2.png" height=200> <img src="maj3.png" height=200>
	<img src="maj4.png" height=200><br>
	You can check the wiring by toggling any two switches-- when you toggle the first and the second, the wires going to the first <tt>and</tt> gate should be highlighted in green.  Check the first and the third, and second and third as well, to make sure all is connected right.
	
	<li> We have each of the three things done in our to-do list above.  The list is connected by "or", so, we need to do the same with our outputs:<br>
	<img src="maj5.png" height=200> <img src="maj6.png" height=200>.
	
	<li> And lastly, let's add an output light that will glow when true:<br>
	<img src="maj7.png" height=200>
</ol>

Test the circuit you just built:
<ul>
	<li> if two or more switches are on, is the output light on?
	<li> if two or more switches are off, is the output light off?
</ul>
Adjust your circuit until it only lights up when two switches are on.  

<h4>Translating Logical Circuits to Logical Expressions</h4>

How do 
we represent this as a logical expression?  Let's work backwards from the output light:  <br>
<img src="maj7.png" height=200>

<p>
Our last gate is an or, so we will write down an <tt>or</tt>
<pre style = "background-color:lavender;width:650px">
	(lotsOfStuff1) or (lotsOfStuff2)
</pre>
We'll use parenthesis to keep things neat.  Now,  let's look at the left hand side <tt>(lotsOfStuff1)</tt>.  It also has an <tt>or</tt>, so we can write it down:
<pre style = "background-color:lavender;width:650px">
	((lotsOfStuff3) or (lotsOfStuff4)) or (lotsOfStuff2)
</pre>
Let's keep refining our expressions <tt>(lotsOfStuff3)</tt> has an <tt>and</tt>
at the top, so, we will replace it with:
<pre style = "background-color:lavender;width:650px">
	(((lotsOfStuff5) and (lotsOfStuff6)) or (lotsOfStuff4)) or (lotsOfStuff2)
</pre>
<tt><tt>(lotsOfStuff5)</tt> is just a wire back to the first input, so, we can 
write that instead:
<pre style = "background-color:lavender;width:650px">
	((in1 and (lotsOfStuff6)) or (lotsOfStuff4)) or (lotsOfStuff2)
</pre>
and similarly, (lotsOfStuff6)</tt> is just a wire back to the second input, so, we can write that instead:
<pre style = "background-color:lavender;width:650px">
	((in1 and in2) or (lotsOfStuff4)) or (lotsOfStuff2)
</pre>
That looks better!  If look at <tt>lotsOfStuff4</tt>, we see an <tt>and</tt> gate with wires back to the first and third inputs:
<pre style = "background-color:lavender;width:650px">
	((in1 and in2) or (in1 and in3)) or (lotsOfStuff2)
</pre>
Similarly, we can replace <tt>lotsOfStuff2</tt> with:
<pre style = "background-color:lavender;width:650px">
	((in1 and in2) or (in1 and in3)) or (in2 and in3)
</pre>

Save this line to a text file (you can use any text editor, just make sure to save it as plain text, with no formatting):
<pre style = "background-color:lavender;width:650px">
#Name: Your name here
#Date: 16 October 2017
#Program #23:  Computes the majority of 3 inputs

out = ((in1 and in2) or (in1 and in3)) or (in2 and in3)
</pre> 
(your expression, preceded by <tt>out = </tt>).
For our logical expressions homework, you submit just a file with the logical expressions.  The grading script evaluates the expression, testing it with different inputs.  See <a href="ps.html">Programming Problem List</a>.

<h4>More Exotic Gates</h4>

<p>In addition the <tt>and</tt>, <tt>or</tt>, and <tt>not</tt> gates, there are several other standard gates.  For each, we can build a circuit using just <tt>and</tt>, <tt>or</tt>, and <tt>not</tt> gates that gives the same output.

<p>What does a <tt>nand</tt> gate do?  
<p><img src="nandGate.png">

<p>
<a href="http://www.neuroproductions.be/logic-lab/index.php?id=78961">
Toggle the inputs</a> to figure out what the gate does.
  
<!--<p> <iframe width="800" height="600" frameborder="0" src="https://www.neuroproductions.be/logic-lab/index.php?id=78961"> </iframe>-->
<p>Now, build a circuit that has the same behavior as a <tt>nand</tt> gate (i.e. for the same inputs, both give identical output) using only <tt>and</tt>, <tt>or</tt>, and <tt>not</tt> gates.

<p>
When you have the answer, label your inputs in1 and in2, save the answer in a file:
<pre style = "background-color:lavender;width:650px">
out = ...
</pre>
(where <tt>...</tt> is replaced by your answer).  See <a href="ps.html">Programming Problem List</a>.

</div>


<div>
<h3> More on the Command Line Interface:  Absolute Paths</h3>

<p><a href="lab4.html">Last lab</a>, we introduced relative paths for navigating the directories via the shell.  Relative paths (e.g. <tt>cd ../</tt>) used the current location when executing.  We can also use <i>absolute paths</i> that are independent of your location.  For example, 
<pre style = "background-color:lavender;width:400px">
    cd /usr/bin
    pwd
    ls
</pre>
will change your working directory to one of the machine's standard <tt>bin</tt> directories which is filled with programs, or binaries.  The next two commands show the path to the working directory and list its contents.  These binaries are in a central location to make it easier to find and use.

<p>Since it is nice to be able to return to your default, or home directory, there is a built-in short-cut for home (<tt>~</tt>).  Try
<pre style = "background-color:lavender;width:400px">
    cd ~
    pwd
    ls
</pre>
The first command will return you to your home directory, no matter where you started.

<p>Next lab, we will introduce scripts, or files of shell commands, that we can execute at the command line.

</div>

<div>
<h3>In-class Quiz</h3>

During lab, there is a <a href="quizzes.html">quiz</a>.  The password to access the quiz will be given during lab.  To complete the quiz, log on to Blackboard (see <a href="lab1.html">Lab 1</a> for details on using Blackboard).

</div>



<div>

<h3>What's Next?</h3>

<p>If you finish the lab early, now is a great time to get a head start on the programming problems due early next week.  There's instructors to help you, and you already have Python up and running.  The <a href="ps.html">Programming Problem List</a> has problem descriptions, suggested reading, and due dates next to each problem.

</div>



</html>